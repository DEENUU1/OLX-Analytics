{% extends "base.html" %}


{% block title %}OLX Analitics | Results{% endblock %}

{% block style %}
  <link rel="stylesheet" type="text/css" href="/static/css/result.css" />
{% endblock %}


{% block content %}

<!-- STATISTICS -->
{% if average_price %}
<div class="container py-3 h-50">
<div class="row d-flex justify-content-center align-items-center h-50">
  <div class="col-md-5 col-lg-6 col-xl-4">
    <div class="card" style="border-radius: 20px; border: 4px solid;">
      <div class="card-body p-3">
        <div class="d-flex">
          <h6 class="flex-grow-1">Average price</h6>
        </div>
        <div class="d-flex flex-column text-center mt-2 mb-2">
          <h6 class="display-4 mb-0 font-weight-bold"> {{average_price}}</h6>
          <span class="small" style="color: #868B94">PLN</span>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
{% endif %}
{% if average_price_per_meter %}
<div class="container py-3 h-50">
<div class="row d-flex justify-content-center align-items-center h-50">
  <div class="col-md-5 col-lg-6 col-xl-4">
    <div class="card" style="border-radius: 20px; border: 4px solid;">
      <div class="card-body p-3">
        <div class="d-flex">
          <h6 class="flex-grow-1">Average price per meter</h6>
        </div>
        <div class="d-flex flex-column text-center mt-2 mb-2">
          <h6 class="display-4 mb-0 font-weight-bold"> {{average_price_per_meter}}</h6>
          <span class="small" style="color: #868B94">PLN</span>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
{% endif %}

<!-- COLLAPSE BUTTONS -->
<div class="container">
    <div class="box">
    <p>
        <a id="collapse-link" data-bs-toggle="collapse" href="#largest_area_plot" aria-expanded="false" aria-controls="collapseExample"> <h3>Offer with the largest area of plot</h3> </a>
    </p>
    </div>
    <div class="box">
        <p>
            <a id="collapse-link" data-bs-toggle="collapse" href="#largest_area_building" aria-expanded="false" aria-controls="collapseExample"> <h3>Offer with the largest area of building</h3>
            </a>
        </p>
    </div>
    <div class="box">
        <p>
            <a id="collapse-link" data-bs-toggle="collapse" href="#most_expensive_offer" aria-expanded="false" aria-controls="collapseExample"> <h3>Most expensive offer </h3>
            </a>
        </p>
    </div>
    <div class="box">
    <p>
        <a id="collapse-link" data-bs-toggle="collapse" href="#most_expensive_offer_per_meter" aria-expanded="false" aria-controls="collapseExample"> <h3> Most expensive offer per meter^2 </h3>
        </a>
    </p>
    </div>
</div>

{% if largest_area_plot %}
<div class="container table-responsive">
    <div class="collapse" id="largest_area_plot">
        <div class="card card-body">  
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">Image</th>
                        <th scope="col">Title & Url</th>
                        <th scope="col">Created date</th>
                        <th scope="col">City & region</th>
                        <th scope="col">Params</th>
                        <th scope="col">Photos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th><img class="table-image" src="{{ largest_area_plot.photos[0] }}"></th>
                        <th><a href={{largest_area_plot.url}}>{{largest_area_plot.title}}</a></th>
                        <th>{{largest_area_plot.created_time}}</th>
                        <th>{{largest_area_plot.city}}, {{largest_area_plot.region}}</th>
                        <th>
                            <ul>
                                {% for param in largest_area_plot.params %}
                                <li>{{param.name}}: {{param.value}}</li>
                                {% endfor %}
                            </ul>
                        </th>
                        <th>
                            <ul>
                                {% for photo in largest_area_plot.photos %}
                                <li><a href="{{photo}}">Photo</a></li>
                                {% endfor %}
                            </ul>
                        </th>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endif %}


{% if largest_area_building %}
<div class="container table-responsive">
    <div class="collapse" id="largest_area_building">
        <div class="card card-body">  
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">Image</th>
                        <th scope="col">Title & Url</th>
                        <th scope="col">Created date</th>
                        <th scope="col">City & region</th>
                        <th scope="col">Params</th>
                        <th scope="col">Photos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th><img class="table-image" src="{{ largest_area_building.photos[0] }}"></th>
                        <th><a href={{largest_area_building.url}}>{{largest_area_building.title}}</a></th>
                        <th>{{largest_area_building.created_time}}</th>
                        <th>{{largest_area_building.city}}, {{largest_area_building.region}}</th>
                        <th>
                            <ul>
                                {% for param in largest_area_building.params %}
                                <li>{{param.name}}: {{param.value}}</li>
                                {% endfor %}
                            </ul>
                        </th>
                        <th>
                            <ul>
                                {% for photo in largest_area_building.photos %}
                                <li><a href="{{photo}}">Photo</a></li>
                                {% endfor %}
                            </ul>
                        </th>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endif %}


{% if most_expensive_offer %}
<div class="container table-responsive">
    <div class="collapse" id="most_expensive_offer">
        <div class="card card-body">  
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">Image</th>
                        <th scope="col">Title & Url</th>
                        <th scope="col">Created date</th>
                        <th scope="col">City & region</th>
                        <th scope="col">Params</th>
                        <th scope="col">Photos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th><img class="table-image" src="{{ most_expensive_offer.photos[0] }}"></th>
                        <th><a href={{most_expensive_offer.url}}>{{largest_area_building.title}}</a></th>
                        <th>{{most_expensive_offer.created_time}}</th>
                        <th>{{most_expensive_offer.city}}, {{most_expensive_offer.region}}</th>
                        <th>
                            <ul>
                                {% for param in most_expensive_offer.params %}
                                <li>{{param.name}}: {{param.value}}</li>
                                {% endfor %}
                            </ul>
                        </th>
                        <th>
                            <ul>
                                {% for photo in most_expensive_offer.photos %}
                                <li><a href="{{photo}}">Photo</a></li>
                                {% endfor %}
                            </ul>
                        </th>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endif %}

{% if most_expensive_offer_per_meter %}
<div class="container table-responsive">
    <div class="collapse" id="most_expensive_offer_per_meter">
        <div class="card card-body">  
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">Image</th>
                        <th scope="col">Title & Url</th>
                        <th scope="col">Created date</th>
                        <th scope="col">City & region</th>
                        <th scope="col">Params</th>
                        <th scope="col">Photos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th><img class="table-image" src="{{ most_expensive_offer_per_meter.photos[0] }}"></th>
                        <th><a href={{most_expensive_offer_per_meter.url}}>{{most_expensive_offer_per_meter.title}}</a></th>
                        <th>{{most_expensive_offer_per_meter.created_time}}</th>
                        <th>{{most_expensive_offer_per_meter.city}}, {{most_expensive_offer_per_meter.region}}</th>
                        <th>
                            <ul>
                                {% for param in most_expensive_offer_per_meter.params %}
                                <li>{{param.name}}: {{param.value}}</li>
                                {% endfor %}
                            </ul>
                        </th>
                        <th>
                            <ul>
                                {% for photo in most_expensive_offer_per_meter.photos %}
                                <li><a href="{{photo}}">Photo</a></li>
                                {% endfor %}
                            </ul>
                        </th>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endif %}


{% if newest_offers %}
<div class="container table-responsive">
<h2>Offers from today</h2>

<table class="table table-hover">
    <thead>
        <tr>
            <th scope="col">Image</th>
            <th scope="col">Title & Url</th>
            <th scope="col">Created date</th>
            <th scope="col">City & region</th>
            <th scope="col">Params</th>
            <th scope="col">Photos</th>
        </tr>
    </thead>
    <tbody>
    {% for data in newest_offers %}
        <tr>
            <th><img class="table-image" src="{{ data.photos[0] }}"></th>
            <th><a href={{data.url}}>{{data.title}}</a></th>
            <th>{{data.created_time}}</th>
            <th>{{data.city}}, {{data.region}}</th>
            <th>
                <ul>
                    {% for param in data.params %}
                    <li>{{param.name}}: {{param.value}}</li>
                    {% endfor %}
                </ul>
            </th>
            <th>
                <ul>
                    {% for photo in data.photos %}
                    <li><a href="{{photo}}">Photo</a></li>
                    {% endfor %}
                </ul>
            </th>
        </tr>
    </tbody>
    {% endfor %}
</table>
</div>
{% endif %}

{% if data_list %}
<div class="container table-responsive">
<h2>All offers</h2>
<table class="table">
    <thead>
        <tr>
            <th scope="col">Image</th>
            <th scope="col">Title & Url</th>
            <th scope="col">Created date</th>
            <th scope="col">City & region</th>
            <th scope="col">Params</th>
            <th scope="col">Photos</th>
        </tr>
    </thead>
    <tbody>
    {% for data in data_list %}
        <tr>
            <th><img class="table-image" src="{{ data.photos[0] }}"></th>
            <th><a href={{data.url}}>{{data.title}}</a></th>
            <th>{{data.created_time}}</th>
            <th>{{data.city}}, {{data.region}}</th>
            <th>
                <ul>
                    {% for param in data.params %}
                    <li>{{param.name}}: {{param.value}}</li>
                    {% endfor %}
                </ul>
            </th>
            <th>
                <ul>
                    {% for photo in data.photos %}
                    <li><a href="{{photo}}">Photo</a></li>
                    {% endfor %}
                </ul>
            </th>
        </tr>
    </tbody>
    {% endfor %}
</table>
</div>
{% endif %}
{% endblock %}
